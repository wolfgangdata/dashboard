text = ~Country, locations = ~Country, marker = list(line = l)
) %>%
colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
p
plot_geo(df) %>%
add_trace(
z = ~Data, color = ~Data, colors = 'Blues',
text = ~Country, locations = ~Country, marker = list(line = l)
) %>%
colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
df <- data.frame("Country" = c("Afghanistan", "Albania", "Algeria"),
"CODE" = c("AFG", "ALB", "DZA"),
"Data" = c(21.71, 13.40, 227.80))
l <- list(color = toRGB("grey"), width = 0.5)
g <- list(
showframe = FALSE,
showcoastlines = FALSE,
projection = list(type = 'Mercator')
)
df <- data.frame("Country" = c("Afghanistan", "Albania", "Algeria"),
"CODE" = c("AFG", "ALB", "DZA"),
"Data" = c(21.71, 13.40, 227.80))
plot_geo(df) %>%
add_trace(
z = ~Data, color = ~Data, colors = 'Blues',
text = ~Country, locations = ~CODE, marker = list(line = l)
) %>%
colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
df <- read.csv('https://raw.githubusercontent.com/plotly/datasets/master/2014_world_gdp_with_codes.csv')
# light grey boundaries
l <- list(color = toRGB("grey"), width = 0.5)
# specify map projection/options
g <- list(
showframe = FALSE,
showcoastlines = FALSE,
projection = list(type = 'Mercator')
)
p <- plot_geo(df) %>%
add_trace(
z = ~GDP..BILLIONS., color = ~GDP..BILLIONS., colors = 'Blues',
text = ~COUNTRY, locations = ~CODE, marker = list(line = l)
) %>%
colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
p
df <- read.csv('https://raw.githubusercontent.com/plotly/datasets/master/2014_world_gdp_with_codes.csv')
# light grey boundaries
l <- list(color = toRGB("grey"), width = 0.5)
# specify map projection/options
g <- list(
showframe = FALSE,
showcoastlines = FALSE,
projection = list(type = 'Mercator')
)
p <- plot_geo(df) %>%
add_trace(
z = ~GDP..BILLIONS., color = ~GDP..BILLIONS., colors = 'Blues',
text = ~COUNTRY, locations = ~CODE, marker = list(line = l)
) %>%
colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
p
library(leaflet)
leaflet(df)
data_col <- read.csv("data/merged_col_01_02.csv", header=T, sep = ",")
meta_deploy <- read.csv("data/meta_deployments.csv", header=T, sep = ",", stringsAsFactors = F)
meta_deploy <- meta_deploy[-1, ]
meta_col <- read.csv("data/meta_sampleID.csv", header=T, sep = ",", stringsAsFactors = F)
df <- data.frame("Country" = c("Afghanistan", "Albania", "Algeria"),
"CODE" = c("AFG", "ALB", "DZA"),
"Data" = c(21.71, 13.40, 227.80))
l <- list(color = toRGB("grey"), width = 0.5)
g <- list(
showframe = FALSE,
showcoastlines = FALSE,
projection = list(type = 'Mercator')
)
plot_geo(df) %>%
add_trace(
z = ~Data, color = ~Data, colors = 'Blues',
text = ~Country, locations = ~CODE, marker = list(line = l)
) %>%
colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
library(dplyr)
library(ggplot2)
library(plotly)
library(leaflet)
df <- data.frame("Country" = c("Afghanistan", "Albania", "Algeria"),
"CODE" = c("AFG", "ALB", "DZA"),
"Data" = c(21.71, 13.40, 227.80))
l <- list(color = toRGB("grey"), width = 0.5)
g <- list(
showframe = FALSE,
showcoastlines = FALSE,
projection = list(type = 'Mercator')
)
plot_geo(df) %>%
add_trace(
z = ~Data, color = ~Data, colors = 'Blues',
text = ~Country, locations = ~CODE, marker = list(line = l)
) %>%
colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
colnames(meta_col)
View(meta_deploy)
meta_deploy <- read.csv("data/meta_deployments.csv", header=T, sep = ",", stringsAsFactors = F)
meta_deploy <- meta_deploy[-1, ]
plot_geo(meta_col) %>%
add_trace(
z = ~Year, color = ~Year, colors = 'Blues',
text = ~Country, locations = ~CODE, marker = list(line = l)
) %>%
colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
plot_geo(meta_deploy) %>%
add_trace(
z = ~Year, color = ~Year, colors = 'Blues',
text = ~Country, locations = ~CODE, marker = list(line = l)
) %>%
colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
g <- list(
showframe = T,
showcoastlines = T,
projection = list(type = 'Mercator')
)
plot_geo(meta_deploy) %>%
add_trace(
z = ~Year, color = ~Year, colors = 'Blues',
text = ~Country, locations = ~CODE, marker = list(line = l)
) %>%
# colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
# title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
g <- list(
showframe = f,
showcoastlines = T,
landcolor = toRGB("grey90"),
projection = list(type = 'Mercator')
)
g <- list(
showframe = f,
showcoastlines = T,
landcolor = toRGB("grey90"),
projection = list(type = 'Mercator')
)
plot_geo(meta_deploy) %>%
add_trace(
z = ~Year, color = ~Year, colors = 'Blues',
text = ~Country, locations = ~CODE
) %>%
# colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
# title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
g <- list(
showframe = F,
showcoastlines = T,
landcolor = toRGB("grey90"),
projection = list(type = 'Mercator')
)
plot_geo(meta_deploy) %>%
add_trace(
z = ~Year, color = ~Year, colors = 'Blues',
text = ~Country, locations = ~CODE
) %>%
# colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
# title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
g <- list(
showframe = F,
showcoastlines = T,
landcolor = toRGB("grey90"),
projection = list(type = 'Mercator')
)
g1 <- c(
g,
resolution = 50,
showcoastlines = T,
countrycolor = toRGB("white"),
coastlinecolor = toRGB("white"),
projection = list(type = 'Mercator'))
g2 <- c(
g,
showcountries = F,
bgcolor = toRGB("white", alpha = 0),
list(domain = list(x = c(0, .6), y = c(0, .6)))
)
plot_geo(meta_deploy) %>%
add_trace(
z = ~Year, color = ~Year, colors = 'Blues',
text = ~Country, locations = ~CODE
) %>%
# colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
# title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
g2 <- c(
g,
showcountries = T,
bgcolor = toRGB("white", alpha = 0),
list(domain = list(x = c(0, .6), y = c(0, .6)))
)
plot_geo(meta_deploy) %>%
add_trace(
z = ~Year, color = ~Year, colors = 'Blues',
text = ~Country, locations = ~CODE
) %>%
# colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
# title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
g <- list(
showframe = F,
showland = T,
landcolor = toRGB("grey90"),
projection = list(type = 'Mercator')
)
g1 <- c(
g,
resolution = 50,
showcoastlines = T,
countrycolor = toRGB("white"),
coastlinecolor = toRGB("white"),
projection = list(type = 'Mercator'))
g2 <- c(
g,
showcountries = T,
bgcolor = toRGB("white", alpha = 0),
list(domain = list(x = c(0, .6), y = c(0, .6)))
)
plot_geo(meta_deploy) %>%
add_trace(
z = ~Year, color = ~Year, colors = 'Blues',
text = ~Country, locations = ~CODE
) %>%
# colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
# title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
g <- list(
showframe = F,
showland = T,
landcolor = toRGB("grey90"),
projection = list(type = 'Mercator')
)
g1 <- c(
g,
resolution = 50,
showcoastlines = T,
countrycolor = toRGB("white"),
coastlinecolor = toRGB("white"),
projection = list(type = 'Mercator'))
g2 <- c(
g,
showcountries = F,
bgcolor = toRGB("white", alpha = 0),
list(domain = list(x = c(0, .6), y = c(0, .6)))
)
plot_geo(meta_deploy) %>%
add_trace(
z = ~Year, color = ~Year, colors = 'Blues',
text = ~Country, locations = ~CODE
) %>%
# colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
# title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
g1 <- c(
g,
resolution = 50,
showcoastlines = T,
countrycolor = toRGB("white"),
coastlinecolor = toRGB("white"),
projection = list(type = 'Mercator'),
list(lonaxis = list(range = c(-15, -5))),
list(lataxis = list(range = c(0, 12))),
list(domain = list(x = c(0, 1), y = c(0, 1)))
)
g2 <- c(
g,
showcountries = F,
bgcolor = toRGB("white", alpha = 0),
list(domain = list(x = c(0, .6), y = c(0, .6)))
)
plot_geo(meta_deploy) %>%
add_trace(
z = ~Year, color = ~Year, colors = 'Blues',
text = ~Country, locations = ~CODE
) %>%
# colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
# title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
plot_geo(meta_deploy) %>%
locationmode = 'country names', sizes = c(1, 600), color = I("black") %>%
add_trace(
z = ~Year, color = ~Year, colors = 'Blues',
text = ~Country, locations = ~CODE
) %>%
# colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
# title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
plot_geo(meta_deploy) %>%
locationmode = 'country names', sizes = c(1, 600), color = I("black") %>%
add_trace(
z = ~Year, color = ~Year, colors = 'Blues',
text = ~Country, locations = ~CODE
) %>%
# colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
# title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
meta_deploy %>% plot_geo() %>%
locationmode = 'country names', sizes = c(1, 600), color = I("black") %>%
add_trace(
z = ~Year, color = ~Year, colors = 'Blues',
text = ~Country, locations = ~CODE
) %>%
# colorbar(title = 'GDP Billions US$', tickprefix = '$') %>%
layout(
# title = '2014 Global GDP<br>Source:<a href="https://www.cia.gov/library/publications/the-world-factbook/fields/2195.html">CIA World Factbook</a>',
geo = g
)
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
dfff <- as.data.frame(matrix(nrow = 10, ncol = 0))
dfff$col_sample_type <- 1:10
dff <- count(data_col[data_col$deployment_name == "Cambodia", ] , col_sample_type)
dff <- data.frame(dff)
dfhist <- as.data.frame(matrix(nrow = 10, ncol = 0))
dfhist$col_sample_type <- 1:10
dfhist <- count(data_col[data_col$deployment_name == "Cambodia", ] , col_sample_type)
View(dfhist)
data_col <- read.csv("data/merged_col_01_02.csv", header=T, sep = ",")
meta_deploy <- read.csv("data/meta_deployments.csv", header=T, sep = ",", stringsAsFactors = F)
meta_deploy <- meta_deploy[-1, ]
meta_col <- read.csv("data/meta_sampleID.csv", header=T, sep = ",", stringsAsFactors = F)
View(data_col)
data_col$deployment_name[data_col$deployment == "1"] <- meta_deploy$Country[meta_deploy$ID == "1"]
data_col$deployment_name[data_col$deployment == "2"] <- meta_deploy$Country[meta_deploy$ID == "2"]
data_col <- left_join(data_col, meta_col, by = c("col_sample_type" = "ID"))
dfhist <- count(data_col[data_col$deployment_name == "Cambodia", ] , col_sample_type)
dfhist2 <- as.data.frame(matrix(nrow = 10, ncol = 0))
dfhist2$col_sample_type <- 1:10
dfhist <- left_join(dfhist2, dfhist, by = "col_sample_type")
View(dfhist)
plot_ly(dfhist, x = ~col_sample_type, y = ~n, type = 'bar')
ggplotly(p) %>% layout(showlegend = F)
runApp()
is.na(dfhist$n)
is.na(dfhist$n) <- 0
dfhist$n
dfhist[dfhist$n == NA]
dfhist$n[dfhist$n == NA]
dfhist$n[dfhist$n == NA] <- 0
dfhist$n
dfhist[dfhist$n == NA,]
dfhist[is.na(dfhist)] <- 0
dfhist
dfhist2 <- as.data.frame(matrix(nrow = 10, ncol = 0))
dfhist2$col_sample_type <- 1:10
dfhist <- count(data_col[data_col$deployment_name == input$deployments, ], col_sample_type)
dfhist2 <- as.data.frame(matrix(nrow = 10, ncol = 0))
dfhist2$col_sample_type <- 1:10
dfhist <- count(data_col[data_col$deployment_name == "Cambodia", ] , col_sample_type)
dfhist2 <- as.data.frame(matrix(nrow = 10, ncol = 0))
dfhist2$col_sample_type <- 1:10
dfhist <- left_join(dfhist2, dfhist, by = "col_sample_type")
dfhist
dfhist$n[is.na(dfhist)]
dfhist$n[is.na(dfhist)] <- 0
dfhist$n[is.na(dfhist$n)]
dfhist$n[is.na(dfhist$n)] <- 0
dfhist$n
p <- plot_ly(dfhist, x = ~col_sample_type, y = ~n, type = 'bar')
p
meta_col
View(data_col)
dfhist <- left_join(dfhist, meta_col, by = c("col_sample_type" = "ID"))
dfhist
plot_ly(dfhist, x = ~sample_type_name, y = ~n, type = 'bar')
runApp()
View(meta_col)
dfhist <- count(data_col[data_col$deployment_name == input$deployments, ], col_sample_type)
dfhist2 <- as.data.frame(matrix(nrow = 10, ncol = 0))
dfhist <- count(data_col[data_col$deployment_name == "Cambodia", ] , col_sample_type)
dfhist <- count(data_col[data_col$deployment_name == input$deployments, ], col_sample_type)
dfhist2 <- as.data.frame(matrix(nrow = 10, ncol = 0))
dfhist2$col_sample_type <- 1:10
dfhist <- left_join(dfhist2, dfhist, by = "col_sample_type")
dfhist$n[is.na(dfhist$n)] <- 0
dfhist <- left_join(dfhist, meta_col, by = c("col_sample_type" = "ID"))
dfhist$sample_type_name <- factor(dfhist$sample_type_name, levels = unique(dfhist$sample_type_name)[order(dfhist$col_sample_type, decreasing = TRUE)])
plot_ly(dfhist, x = ~sample_type_name, y = ~n, type = 'bar')
runApp()
dfhist <- count(data_col[data_col$deployment_name == "Cambodia", ] , col_sample_type)
dfhist2 <- as.data.frame(matrix(nrow = 10, ncol = 0))
dfhist2$col_sample_type <- 1:10
dfhist <- left_join(dfhist2, dfhist, by = "col_sample_type")
dfhist <- left_join(dfhist, meta_col, by = c("col_sample_type" = "ID"))
dfhist$sample_type_name <- factor(dfhist$sample_type_name, levels = unique(dfhist$sample_type_name)[order(dfhist$col_sample_type)])
p <- plot_ly(dfhist, x = ~sample_type_name, y = ~n, type = 'bar')
p
dfhist <- count(data_col[data_col$deployment_name == "Cambodia", ] , col_sample_type)
dfhist2 <- as.data.frame(matrix(nrow = 10, ncol = 0))
dfhist2$col_sample_type <- 1:10
dfhist <- left_join(dfhist2, dfhist, by = "col_sample_type")
dfhist <- left_join(dfhist, meta_col, by = c("col_sample_type" = "ID"))
dfhist$n[is.na(dfhist$n)] <- 0
dfhist$sample_type_name <- factor(dfhist$sample_type_name, levels = unique(dfhist$sample_type_name)[order(dfhist$col_sample_type)])
p <- plot_ly(dfhist, x = ~sample_type_name, y = ~n, type = 'bar')
p
dfhist <- count(data_col[data_col$deployment_name == "Cambodia", ] , col_sample_type)
dfhist
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
